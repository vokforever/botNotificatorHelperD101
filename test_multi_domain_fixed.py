#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ parse_multi_domain_message
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from main import parse_multi_domain_message

def test_table_format():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ –°–æ–∑–¥–∞–Ω –∏ –ò—Å—Ç–µ–∫–∞–µ—Ç"""
    
    test_text = """–î–æ–º–µ–Ω  	–°–æ–∑–¥–∞–Ω  	–ü–µ—Ä—Å–æ–Ω–∞  	–†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä  	–ü—Ä–æ–¥–ª–µ–Ω–∏–µ  	–ò—Å—Ç–µ–∫–∞–µ—Ç  	   
–º–∏–Ω–¥–∞–ª—å.—Ä—É—Å
03.05.2023	-	
Regru

–ê–≤—Ç–æ
03.05.2026	 
–∫–≤–∞—Ä—Ç–∞–ª–º–∏–Ω–¥–∞–ª—å.—Ä—Ñ
03.05.2023	–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä	
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å

–ê–≤—Ç–æ
03.05.2026	 
–∫–≤–∞—Ä—Ç–∞–ª-–º–∏–Ω–¥–∞–ª—å.—Ä—Ñ
03.05.2023	–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä	
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å

–ê–≤—Ç–æ
03.05.2026	 
–∂–∫-–º–∏–Ω–¥–∞–ª—å.—Ä—Ñ
03.05.2023	–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä	
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å

–ê–≤—Ç–æ
03.05.2026	 
kvartal-mindal.ru
03.05.2023	–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä	
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å
–°–ø—Ä–∏–Ω—Ç–Ω–µ–π–º—Å

–ê–≤—Ç–æ
03.05.2026	"""
    
    print("üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:")
    print("=" * 50)
    print(test_text)
    print("=" * 50)
    
    result = parse_multi_domain_message(test_text)
    
    if result:
        print("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:")
        print(f"–¢–∏–ø: {result.get('type')}")
        print(f"–î–æ–º–µ–Ω—ã: {result.get('domains')}")
        print(f"–î–∞—Ç—ã: {result.get('dates')}")
        print(f"–ü—Ä–æ–µ–∫—Ç: {result.get('project')}")
        print(f"–ú–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞: {result.get('parsing_method')}")
        print(f"–í—Å–µ–≥–æ –¥–æ–º–µ–Ω–æ–≤: {result.get('total_domains')}")
        print(f"–í—Å–µ–≥–æ –¥–∞—Ç: {result.get('total_dates')}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
        if result.get('dates'):
            print("\nüìÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç:")
            for i, date in enumerate(result['dates']):
                domain = result['domains'][i] if i < len(result['domains']) else "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
                print(f"‚Ä¢ {domain}: {date}")
    else:
        print("‚ùå –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è")

def test_old_format():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –î–û–ú–ï–ù –∏ –ò–°–¢–ï–ö–ê–ï–¢"""
    
    test_text = """–î–û–ú–ï–ù
–ø—Ä–æ–≥—Ä—ç—Å—Å.—Ä—Ñ
–ø—Ä–æ–≥—Ä—ç—Å.—Ä—Ñ
–ø—Ä–æ-–≥—Ä–µ—Å—Å.—Ä—Ñ
–∂–∫–ø—Ä–æ–≥—Ä–µ—Å—Å.—Ä—Ñ
progres82.ru

–ò–°–¢–ï–ö–ê–ï–¢
30.03.2025
30.03.2025
30.03.2025
30.03.2025
27.04.2025

–ø—Ä–æ–µ–∫—Ç –í–õ–ê–î–û–ì–†–ê–î"""
    
    print("\nüîç –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:")
    print("=" * 50)
    print(test_text)
    print("=" * 50)
    
    result = parse_multi_domain_message(test_text)
    
    if result:
        print("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:")
        print(f"–¢–∏–ø: {result.get('type')}")
        print(f"–î–æ–º–µ–Ω—ã: {result.get('domains')}")
        print(f"–î–∞—Ç—ã: {result.get('dates')}")
        print(f"–ü—Ä–æ–µ–∫—Ç: {result.get('project')}")
        print(f"–ú–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞: {result.get('parsing_method')}")
        print(f"–í—Å–µ–≥–æ –¥–æ–º–µ–Ω–æ–≤: {result.get('total_domains')}")
        print(f"–í—Å–µ–≥–æ –¥–∞—Ç: {result.get('total_dates')}")
    else:
        print("‚ùå –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è")

if __name__ == "__main__":
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ parse_multi_domain_message")
    print("=" * 60)
    
    test_table_format()
    test_old_format()
    
    print("\n‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
